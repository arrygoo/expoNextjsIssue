{"ast":null,"code":"\"use strict\";var _interopRequireDefault2=require(\"@babel/runtime/helpers/interopRequireDefault\");var _classCallCheck2=_interopRequireDefault2(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault2(require(\"@babel/runtime/helpers/createClass\"));var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _promise=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));var DOMAttributeNames={acceptCharset:'accept-charset',className:'class',htmlFor:'for',httpEquiv:'http-equiv'};var HeadManager=function(){function HeadManager(){var _this=this;(0,_classCallCheck2.default)(this,HeadManager);this.updateHead=function(head){var promise=_this.updatePromise=_promise.default.resolve().then(function(){if(promise!==_this.updatePromise)return;_this.updatePromise=null;_this.doUpdateHead(head);});};this.updatePromise=null;}(0,_createClass2.default)(HeadManager,[{key:\"doUpdateHead\",value:function doUpdateHead(head){var _this2=this;var tags={};head.forEach(function(h){var components=tags[h.type]||[];components.push(h);tags[h.type]=components;});this.updateTitle(tags.title?tags.title[0]:null);var types=['meta','base','link','style','script'];types.forEach(function(type){_this2.updateElements(type,tags[type]||[]);});}},{key:\"updateTitle\",value:function updateTitle(component){var title='';if(component){var children=component.props.children;title=typeof children==='string'?children:children.join('');}if(title!==document.title)document.title=title;}},{key:\"updateElements\",value:function updateElements(type,components){var headEl=document.getElementsByTagName('head')[0];var headCountEl=headEl.querySelector('meta[name=next-head-count]');if(process.env.NODE_ENV!=='production'){if(!headCountEl){console.error('Warning: next-head-count is missing. https://err.sh/next.js/next-head-count-missing');return;}}var headCount=Number(headCountEl.content);var oldTags=[];for(var i=0,j=headCountEl.previousElementSibling;i<headCount;i++,j=j.previousElementSibling){if(j.tagName.toLowerCase()===type){oldTags.push(j);}}var newTags=components.map(reactElementToDOM).filter(function(newTag){for(var k=0,len=oldTags.length;k<len;k++){var oldTag=oldTags[k];if(oldTag.isEqualNode(newTag)){oldTags.splice(k,1);return false;}}return true;});oldTags.forEach(function(t){return t.parentNode.removeChild(t);});newTags.forEach(function(t){return headEl.insertBefore(t,headCountEl);});headCountEl.content=(headCount-oldTags.length+newTags.length).toString();}}]);return HeadManager;}();exports.default=HeadManager;function reactElementToDOM(_ref){var type=_ref.type,props=_ref.props;var el=document.createElement(type);for(var p in props){if(!props.hasOwnProperty(p))continue;if(p==='children'||p==='dangerouslySetInnerHTML')continue;var attr=DOMAttributeNames[p]||p.toLowerCase();el.setAttribute(attr,props[p]);}var children=props.children,dangerouslySetInnerHTML=props.dangerouslySetInnerHTML;if(dangerouslySetInnerHTML){el.innerHTML=dangerouslySetInnerHTML.__html||'';}else if(children){el.textContent=typeof children==='string'?children:children.join('');}return el;}","map":null,"metadata":{},"sourceType":"script"}